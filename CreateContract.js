var Web3 = require("web3");

// connect to ganache
const netAddr = "http://127.0.0.1:8545";
var web3 = new Web3(new Web3.providers.HttpProvider(netAddr));


(async () => {
  
  const accounts = await web3.eth.getAccounts();

  // get balances from all accts
  for (var i in accounts) {
    let acct = accounts[i];
    const balance = await web3.eth.getBalance(acct);
    console.log(acct, "balance:", web3.utils.fromWei(balance, "ether"));    
  }

  // sendEth(accounts[2], accounts[4]);

})();



// const fromAcct = "0x147029a6f932bdd20b4a517736d5b480875c401c";
// const destAcct = "0x5dfeb28d4e67c8be8d27872dac49adfd54af3687";

// var _dest = destAcct;
// var newContract = new web3.eth.Contract([{"constant":false,"inputs":[{"name":"_dest","type":"address"}],"name":"setDestination","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"dest","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"logos","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_logos","type":"string"}],"name":"cast","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[{"name":"_dest","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_dest","type":"address"}],"name":"LogInit","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_from","type":"address"},{"indexed":false,"name":"_amount","type":"uint256"}],"name":"LogWithdrawal","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_logos","type":"string"}],"name":"LogSetLogos","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_dest","type":"address"}],"name":"LogSetDestination","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_from","type":"address"},{"indexed":false,"name":"_amount","type":"uint256"}],"name":"LogPayin","type":"event"}]);
// newContract.deploy({
//   data: '0x608060405234801561001057600080fd5b5060405160208061069f83398101806040528101908080519060200190929190505050806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507f70a65a7c8565da4586b024094d2479522c9a4621bb8bc48691a730fe527dc40181604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a1506105b9806100e66000396000f300608060405260043610610062576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680630a0a05e61461013757806384b366dc1461017a578063cd6f8d44146101d1578063d78385fc14610261575b7fee88ddc7cb3929892a7bfd290666aeea4df91ece6cff27a70248d82f61f853403334604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a16000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc349081150290604051600060405180830381858888f19350505050158015610134573d6000803e3d6000fd5b50005b34801561014357600080fd5b50610178600480360381019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506102ca565b005b34801561018657600080fd5b5061018f610370565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156101dd57600080fd5b506101e6610395565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561022657808201518184015260208101905061020b565b50505050905090810190601f1680156102535780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561026d57600080fd5b506102c8600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050610433565b005b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507fdf049f1f714fb10cd6adda14243b73ca328dc22b59b15045698f3b726dfbab7e81604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a150565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561042b5780601f106104005761010080835404028352916020019161042b565b820191906000526020600020905b81548152906001019060200180831161040e57829003601f168201915b505050505081565b80600190805190602001906104499291906104e8565b507ef26701161bb62a3f059912e12061cf737d15470035352eac6784fb042f0a35816040518080602001828103825283818151815260200191508051906020019080838360005b838110156104ab578082015181840152602081019050610490565b50505050905090810190601f1680156104d85780820380516001836020036101000a031916815260200191505b509250505060405180910390a150565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061052957805160ff1916838001178555610557565b82800160010185558215610557579182015b8281111561055657825182559160200191906001019061053b565b5b5090506105649190610568565b5090565b61058a91905b8082111561058657600081600090555060010161056e565b5090565b905600a165627a7a72305820c7b4f8ae0fa02d370e119bcf97708e8606c710a4a88e25d83c4e617e70b42e0e0029',   
//   arguments: [destAcct]
// })
// .send({
//   from: fromAcct,
//   gas: 1500000,
//   gasPrice: '30000000000000'
// }, function(error, transactionHash){ 
//   console.log(error, transactionHash); 
// })
// .on('error', function(error){ 
//   console.log(error);
// })
// .on('transactionHash', function(transactionHash){ 
//   console.log(transactionHash);   
// })
// .on('receipt', function(receipt){
//    console.log(receipt.contractAddress) // contains the new contract address
// })
// .on('confirmation', function(confirmationNumber, receipt){
//   console.log(confirmationNumber, receipt);
// })
// .then(function(newContractInstance){
//     console.log(newContractInstance.options.address) // instance with the new contract address
// });


// // var element = elementContract.new(
// //    _dest,
// //    {
// //      from: web3.eth.accounts[0], 
// //      data: '0x608060405234801561001057600080fd5b5060405160208061069f83398101806040528101908080519060200190929190505050806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507f70a65a7c8565da4586b024094d2479522c9a4621bb8bc48691a730fe527dc40181604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a1506105b9806100e66000396000f300608060405260043610610062576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680630a0a05e61461013757806384b366dc1461017a578063cd6f8d44146101d1578063d78385fc14610261575b7fee88ddc7cb3929892a7bfd290666aeea4df91ece6cff27a70248d82f61f853403334604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a16000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc349081150290604051600060405180830381858888f19350505050158015610134573d6000803e3d6000fd5b50005b34801561014357600080fd5b50610178600480360381019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506102ca565b005b34801561018657600080fd5b5061018f610370565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156101dd57600080fd5b506101e6610395565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561022657808201518184015260208101905061020b565b50505050905090810190601f1680156102535780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561026d57600080fd5b506102c8600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050610433565b005b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507fdf049f1f714fb10cd6adda14243b73ca328dc22b59b15045698f3b726dfbab7e81604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a150565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561042b5780601f106104005761010080835404028352916020019161042b565b820191906000526020600020905b81548152906001019060200180831161040e57829003601f168201915b505050505081565b80600190805190602001906104499291906104e8565b507ef26701161bb62a3f059912e12061cf737d15470035352eac6784fb042f0a35816040518080602001828103825283818151815260200191508051906020019080838360005b838110156104ab578082015181840152602081019050610490565b50505050905090810190601f1680156104d85780820380516001836020036101000a031916815260200191505b509250505060405180910390a150565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061052957805160ff1916838001178555610557565b82800160010185558215610557579182015b8281111561055657825182559160200191906001019061053b565b5b5090506105649190610568565b5090565b61058a91905b8082111561058657600081600090555060010161056e565b5090565b905600a165627a7a72305820c7b4f8ae0fa02d370e119bcf97708e8606c710a4a88e25d83c4e617e70b42e0e0029', 
// //      gas: '4700000'
// //    }, function (e, contract){
// //     console.log(e, contract);
// //     if (typeof contract.address !== 'undefined') {
// //          console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
// //     }
// // });
